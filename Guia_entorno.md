# Estad√≠stica multivariante en el an√°lisis de datos gen√≥micos 2025

## Entorno
Windows Subsystem for Linux versi√≥n 2 (WSL2) es una herramienta muy √∫til especialmente en el an√°lisis gen√≥mico, ya que permite ejecutar herramientas bioinform√°ticas t√≠picas de sistemas Unix/Linux directamente desde Windows.

*"permite a los desarrolladores instalar una distribuci√≥n de Linux (como Ubuntu, OpenSUSE, Kali, Debian, Arch Linux, etc.) y usar aplicaciones, utilidades y herramientas de l√≠nea de comandos de Bash directamente en Windows, sin modificar, sin la sobrecarga de una m√°quina virtual tradicional o una configuraci√≥n de arranque dual."*


Utilizar el subsistema de Windows para Linux tiene muchas ventajas para el an√°lisis gen√≥mico. Pertime tener acceso nativo a herramientas bioinform√°ticas (sin necesidad de m√°quinas virtuales pesadas), lo que permite asignar mayor cantidad de recursos a los an√°lisis.
Integraci√≥n con Windows: puedes acceder a tus archivos locales desde Linux.
Uso de scripts bash, Python, R, etc., con compatibilidad total.
Entorno de desarrollo flexible y potente.

## üêß Instalar Ubuntu en Windows con WSL2
### Requisitos previos:
* Sistema operativo: Windows 10 o 11 (versi√≥n 64 bits)
* Tener permisos de administrador
* Espacio en disco disponible (recomendado al menos 10 GB)
* Habilitada la caracter√≠stica m√°quina virtual

### Paso 1: Habilitar WSL en su sistema
Abra PowerShell como administrador (men√∫ > Inicio de PowerShell > , haga clic con el bot√≥n derecho en > Ejecutar como administrador) y escriba este comando:

```PowerShell
dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
```
### Paso 2: Comprobaci√≥n de los requisitos para ejecutar WSL 2
Para actualizar a WSL 2, debe ejecutar Windows 10 (revisar versiones en la p√°gina oficial de Microsoft) o Windows 11.
Para comprobar la versi√≥n y el n√∫mero de compilaci√≥n, seleccione la tecla del logotipo de Windows + R, escriba winver y seleccione OK. Actualice a la versi√≥n m√°s reciente de Windows en el men√∫ Configuraci√≥n.

### Paso 3: Habilitaci√≥n de la caracter√≠stica m√°quina virtual
Antes de instalar WSL 2, debe estar habilidatada la caracter√≠stica opcional Plataforma de m√°quina virtual. La m√°quina requerir√° funcionalidades de virtualizaci√≥n para usar esta caracter√≠stica. Revisar (ctrl + shift + escape) 

En caso de no tener habilitada esta opci√≥n abra PowerShell como administrador y ejecute:

```PowerShell
dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
```
Reinicie la m√°quina para completar la instalaci√≥n y actualizaci√≥n de WSL a WSL 2.

### Paso 4: Descarga del paquete de actualizaci√≥n del kernel de Linux

Descargue el paquete m√°s reciente: https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi
Ejecute el paquete de actualizaci√≥n descargado en el paso anterior. (Haga doble clic para ejecutar; se le pedir√°n permisos elevados, seleccione "S√≠" para aprobar esta instalaci√≥n).

### Paso 5: Establecer WSL 2 como versi√≥n predeterminada
Abra PowerShell y ejecute este comando para establecer WSL 2 como versi√≥n predeterminada al instalar una nueva distribuci√≥n de Linux:

```PowerShell
wsl --set-default-version 2
```
### Paso 6: Instalaci√≥n de la distribuci√≥n de Linux que prefiera
Abra Microsoft Store y seleccione Ubuntu 24.04.1 LTS. Descarguelo e instalelo. 
A continuaci√≥n, deber√° crear una cuenta de usuario y una contrase√±a para la nueva distribuci√≥n de Linux.

Puede enumerar las distribuciones de Linux instaladas y comprobar la versi√≥n de WSL a la que est√° configurada cada una escribiendo el comando: wsl -l -v en PowerShell o en el s√≠mbolo del sistema de Windows.


Actualizar funciones basicas de Linux:

```

# Actualizar todos los paquetes
sudo apt update && sudo apt upgrade -y

# Incluye compiladores y herramientas necesarias para compilar codigo desde fuentes
sudo apt install build-essential

# Herramientas para descargar archivos desde la web.
sudo apt install curl wget

# Editores de texto para la linea de comandos.
sudo apt install vim nano

# Herramienta para monitorizar el uso de CPU, memoria y procesos en tiempo real.
sudo apt install htop
sudo apt install glances
```
Puede usar cualquier carpeta de Windows desde WSL accediendo a /mnt/c/ (por ejemplo):

```
cd /mnt/c/Users/usuario/Documents/proyecto_genomico
```

## Uso de repositorios para el control de versiones

En los √∫ltimos a√±os, la forma en que trabajamos con c√≥digo, datos y documentaci√≥n ha evolucionado significativamente. En el √°mbito del an√°lisis de datos gen√≥micos, donde los proyectos suelen involucrar m√∫ltiples archivos (scripts de R, archivos FASTQ, BAM, VCF, anotaciones, resultados intermedios, visualizaciones, etc.), es fundamental contar con una estructura organizada y reproducible.

Una herramienta clave para lograrlo es el uso de repositorios bajo control de versiones , y dentro de estas herramientas, Git se ha convertido en un est√°ndar ampliamente adoptado. Combinado con plataformas como GitHub , Git permite no solo organizar mejor nuestros proyectos, sino tambi√©n colaborar, compartir y mantener un historial claro de los cambios realizados a lo largo del tiempo.
¬øQu√© es un repositorio? Un repositorio (o repo , por sus siglas en ingl√©s) es un espacio centralizado donde se almacenan los archivos de un proyecto junto con su historial completo de cambios .

Se puede pensar como una carpeta inteligente que no solo guarda los archivos actuales, sino tambi√©n:

* Cada versi√≥n anterior de esos archivos,
* Qui√©n hizo cada cambio,
* Cu√°ndo se hizo,
* Y por qu√© se hizo (a trav√©s de mensajes de confirmaci√≥n o commit messages ).

RStudio, por otro lado, facilita enormemente esta integraci√≥n al permitirnos trabajar directamente con repositorios de GitHub desde su interfaz. Esto nos permite crear proyectos encapsulados que contienen todo lo necesario para ejecutar y replicar nuestro an√°lisis: c√≥digo, datos, documentaci√≥n e incluso entornos personalizados.

Al vincular un proyecto de RStudio con un repositorio de GitHub, ganamos en varios aspectos fundamentales:

* Organizaci√≥n : Todo el proyecto vive en un √∫nico directorio, lo que facilita su manejo y portabilidad.
* Reproducibilidad : Garantizamos que cualquier persona pueda replicar el an√°lisis exactamente como fue dise√±ado, gracias a que todos los archivos necesarios est√°n disponibles y versionados.
* Control de cambios : Podemos rastrear cada modificaci√≥n realizada, revertir errores y entender c√≥mo ha evolucionado nuestro trabajo.
* Colaboraci√≥n : Es f√°cil compartir el proyecto con otros investigadores o estudiantes, permitiendo comentarios, revisiones y contribuciones en tiempo real.
* Actualizaci√≥n continua : Si el repositorio pertenece a un curso, taller o biblioteca p√∫blica, podemos mantenernos al d√≠a incorporando nuevos contenidos o correcciones sin perder nuestro propio trabajo local.

A lo largo de este curso, se comentar√° c√≥mo integrar estas pr√°cticas en los proyectos de an√°lisis gen√≥mico, comenzando por la creaci√≥n de un proyecto en RStudio asociado a un repositorio de GitHub.

## Qu√© es Git?

Git es un software de c√≥digo abierto para el control de versiones. Es una especie de administrador de proyectos no amigable.

### Instala Git
Una vez actualizado, instalar Git en Ubuntu con este comando:

```
sudo apt install git
```
Verificar que se instal√≥ correctamente
```
git --version
# deber√≠a verse algo como: git version 2.xx.x
```

Configura Git (una sola vez): Es importante configurar el nombre de usuario y correo electr√≥nico, ya que Git los usa para identificar qui√©n hizo cada cambio.
```
git config --global user.name "SuNombre"
git config --global user.email "sucorreo@example.com"

# verificar configuraci√≥n
git config --list
```

## T√©rminos b√°sicos 

**1. Repositorio (repo):**
Es la "carpeta inteligente" donde resides su proyecto.
Contiene sus archivos + el historial completo de cambios realizados.
Puede ser local (en tu computadora) o remoto (en GitHub, GitLab, etc.).

**2. Commit:**
Es una "instant√°nea" o versi√≥n guardada de su trabajo.
Cada commit tiene un mensaje que explica qu√© se hizo (git commit -m "mensaje").
Ejemplo: git commit -m "A√±adido script de filtrado de SNPs"

**3. Branch (rama):**
Es una l√≠nea de desarrollo independiente.
La rama principal suele llamarse main o master. Se usan ramas para probar cosas nuevas sin afectar el proyecto principal.

Comandos √∫tiles:
* git branch ‚Üí ver ramas
* git checkout nombre_rama ‚Üí cambiar de rama
* git switch -c nueva_rama ‚Üí crear y cambiar a una nueva rama

**4. Merge:**
Es unir dos ramas. Por ejemplo, integrar cambios de una rama de prueba a la principal.
Ejemplo: despu√©s de trabajar en rama-analisis, puede hacer merge con main.

**5. Pull:**
Descargar cambios desde un repositorio remoto (como GitHub).
git pull origin main ‚Üí trae las √∫ltimas actualizaciones del repositorio remoto.

**6. Push:**
Subir sus commits locales al repositorio remoto.
git push origin main ‚Üí env√≠a sus cambios a GitHub.

**7. Clone:**
Copiar un repositorio remoto a su computadora
git clone URL_DEL_REPO ‚Üí crea una copia local del proyecto.

**8. Status:**
Muestra el estado actual del repositorio: qu√© archivos han cambiado, si hay commits pendientes, etc.
git status ‚Üí es muy √∫til antes de hacer un commit.

**9. Add:**
A√±ade cambios al √°rea de preparaci√≥n (staging ) antes de hacer commit.
git add nombre_archivo.R ‚Üí prepara solo ese archivo.
git add . ‚Üí prepara todos los archivos modificados.

**10. Log:**
Muestra el historial de commits realizados.
git log ‚Üí le muestra qui√©n hizo qu√© y cu√°ndo.

### Resumen visual

| Acci√≥n         | Comando t√≠pico                      | Descripci√≥n                                      |
|----------------|-----------------------------------|--------------------------------------------------|
| Clonar         | `git clone URL`                   | Copiar un repositorio remoto a su m√°quina        |
| A√±adir         | `git add .`                       | Preparar todos los cambios para hacer commit     |
| Guardar        | `git commit -m "mensaje"`         | Crear una nueva versi√≥n del proyecto             |
| Ver estado     | `git status`                      | Ver qu√© archivos han sido modificados            |
| Subir cambios  | `git push origin main`            | Enviar sus commits al repositorio remoto         |
| Descargar      | `git pull origin main`            | Obtener los √∫ltimos cambios del repositorio remoto |
| Ver historial  | `git log`                         | Revisar el historial de cambios                  |
| Ver ramas      | `git branch`                      | Mostrar las ramas existentes                     |
| Cambiar rama   | `git checkout nombre_rama`        | Moverse entre ramas                              |
| Crear rama     | `git switch -c nueva_rama`        | Crear y moverse a una nueva rama                 |
| Elimina rama   | `git branch -d nombre_rama`       | Elimina rama                                     |


### Commits y Branches en Git
A, B, C: Commits realizados en la rama main. En el commit C, se crea una nueva rama llamada feature-analisis. D, E: Nuevos commits realizados √∫nicamente en la rama feature-analisis.
```
main (rama principal)
|
A---B---C
         \
          \___ feature-analisis (rama secundaria)
               \
                D---E
```
Se puede hacer un merge de feature-analisis con main para integrar los cambios, o eliminar la rama si no se usar√°
```
main (rama principal)
|
A---B---C---------------------------F (merge)
         \                         /
          \___ feature-analisis __/
               \
                D---E
```
Aqu√≠ el commit F representa el resultado del merge entre main y feature-analisis.

### Las 3 etapas de un archivo en Git

Git maneja un sistema de tres estados principales para los archivos dentro de un repositorio:
* Modified (Modificado): El archivo ha sido editado, pero Git a√∫n no lo conoce.
* Staged (Preparado): El archivo se ha a√±adido al "stage" (√°rea de preparaci√≥n) para incluirse en el pr√≥ximo commit.
* Committed (Confirmado): El archivo ha sido guardado permanentemente en la base de datos de Git.

```
# 1. Edita un archivo (por ejemplo script.R)
nano script.R

# 2. Verifica el estado del repositorio
git status

# 3. A√±ade los cambios al staging area
git add script.R

# 4. Confirma los cambios (commit)
git commit -m "A√±adida funci√≥n de filtrado de SNPs"
```

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     git add      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     git commit     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>   ‚îÇ               ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>    ‚îÇ               ‚îÇ
‚îÇ  Modified    ‚îÇ     (staging)    ‚îÇ    Staged     ‚îÇ     (commited)     ‚îÇ   Committed   ‚îÇ
‚îÇ              ‚îÇ  <‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ    ‚îÇ               ‚îÇ                    ‚îÇ               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     git reset    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## Git en windows
Git para Windows, tambi√©n conocido como msysgit o "Git Bash", permite obtener Git adem√°s de otras herramientas √∫tiles, como la shell Bash. 
Git para Windows deja el ejecutable de Git en una ubicaci√≥n convencional, lo que le ayudar√° y a otros programas, como RStudio, a encontrarlo y usarlo. 
Esto tambi√©n facilita la transici√≥n a un uso m√°s experto, ya que la shell "Git Bash" le resultar√° √∫til al explorar fuera de R/RStudio.

Para instalarlo, descargar el ejecutable de https://git-scm.com/downloads e instalarlo con la configuraci√≥n predeterminada.

### Instalar R y rstudio
R es un entorno de programaci√≥n dise√±ado espec√≠ficamente para el an√°lisis estad√≠stico y la visualizaci√≥n de datos, lo que lo convierte en una herramienta ideal para cient√≠ficos, investigadores y analistas que necesitan procesar grandes vol√∫menes de informaci√≥n con precisi√≥n. 
Su amplia comunidad y su ecosistema de paquetes permiten acceder a m√©todos avanzados de manera sencilla y reproducible. RStudio , por su parte, ofrece una interfaz intuitiva y completa que facilita el trabajo con R, integrando herramientas clave como control de versiones, edici√≥n de scripts, visualizaci√≥n interactiva y generaci√≥n de informes din√°micos. 
Juntos, forman una plataforma poderosa, flexible y accesible, perfecta para explorar, analizar y comunicar resultados a partir de datos complejos, como los que se manejan en estudios gen√≥micos y bioinform√°ticos.

Para instalar R, descargar el ejecutable correspondiente de https://cran.r-project.org e instalarlo en windows ya que se utilizar√° en Windows.
Para insalar rstudio descargar el ejecutable de https://posit.co/downloads/ e instalarlo en Windows.

RStudio viene con una versi√≥n portable de Git para facilitar el uso del control de versiones directamente desde la interfaz. Para utilizarla, abrir el ejecutable de rstudio. 
Una vez abierto dirigirse al panel de la consola (inferior izquierdo) y acceder a la pesta√±a terminal. En la terminal acceder a la version instalada de git con el comando: 

```
which git
git --version
```
En este caso tambi√©n hay que configurar Git con un nombre de usuario y un correo electr√≥nico. Para hacer esto moverse a la pesta√±a consola y escribir en esta el siguiente comando: 

```
install.package("usethis")
library(usethis)
usethis::edit_git_config()
# Modificar en el fichero ".gitconfig" los apartados: "name" y "email" 
# y guardar el fichero y puede cerrarse
```

### Inicializando un nuevo repositorio en Rstudio

Una de las grandes ventajas de trabajar con RStudio es la posibilidad de crear proyectos asociados directamente a un repositorio de GitHub, lo cual se logra mediante la clonaci√≥n del repositorio dentro de un nuevo proyecto en RStudio. 
Esta integraci√≥n permite aprovechar al m√°ximo las funcionalidades de ambos entornos: por un lado, el proyecto queda perfectamente organizado dentro de RStudio, encapsulando todos los archivos relevantes (scripts, datos, resultados, documentaci√≥n) en una misma unidad de trabajo; 
por otro lado, se encuentra bajo control de versiones gracias a Git y alojado en GitHub, lo cual garantiza trazabilidad, seguridad y capacidad de colaboraci√≥n. 
Esto resulta especialmente valioso cuando trabajamos con repositorios mantenidos por terceros, ya que nos permite mantener nuestro c√≥digo actualizado f√°cilmente incorporando los √∫ltimos cambios desde el repositorio original. 
Adem√°s, si contamos con permisos de escritura, podemos realizar modificaciones locales y sincronizarlas directamente hacia el repositorio remoto desde la propia interfaz de RStudio, facilitando un flujo de trabajo √°gil, transparente y altamente colaborativo. 

La funci√≥n use_git() agregar√° un repositorio Git (a menudo denominado ‚Äúrepositorio‚Äù) a un proyecto RStudio existente.

En RStudio:
1. Crear un nueva proyecto
2. Seleccionar ‚ÄúNuevo Directorio‚Äù
3. Proyecto
4. Activar: ‚ÄúCreate a git repository‚Äù

Otra manera de crear un repositorio es mediante la librer√≠a *usethis* por medio de la consola.
```
library(usethis)
usethis::use_git()
# Elegir siempre la opci√≥n: 1
# Y ante la ventana, seleccionar: "Save"
```
Si todo salio bien, una pesta√±a con el nombre de Git aparecer√° en la ventana superior derecha. Al seleccionarla se puede visitar todo el historial del proyecto al dar click en el √≠cono del reloj.
Cada vez que se desee realizar un *commit* se debe dar click en el √≠cono con el nombre commit. Se selecciona el scritp que quiere confirmarse, se agrega el descriptor del cambio y se confirma.
De esta manera se puede revisitar cada cambio realizado durante el proceso de edici√≥n.

---
Pueden ampliar esta breve explicaci√≥n mediante alguno de los muchos materiales que pueden encontrar por internet.
* https://learn.microsoft.com/es-es/windows/wsl/install
* https://swcarpentry.github.io/git-novice-es/
* https://git-scm.com/book/en/v2
* https://cran.r-project.org

